"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.MongoDBAdapter = void 0;
class MongoDBAdapter {
    constructor({ collection }) {
        this.collection = collection;
    }
    async read(key) {
        const session = await this.collection.findOne({ key });
        if (session === null || session === undefined) {
            return undefined;
        }
        return session.value;
    }
    async write(key, data) {
        await this.collection.updateOne({
            key
        }, {
            $set: {
                key,
                value: data
            }
        }, { upsert: true });
    }
    async delete(key) {
        await this.collection.deleteOne({ key });
    }
}
exports.MongoDBAdapter = MongoDBAdapter;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL21vZC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFRQSxNQUFhLGNBQWM7SUFHekIsWUFBWSxFQUFFLFVBQVUsRUFBd0M7UUFDOUQsSUFBSSxDQUFDLFVBQVUsR0FBRyxVQUFVLENBQUE7SUFDOUIsQ0FBQztJQUVELEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBVztRQUNwQixNQUFNLE9BQU8sR0FBRyxNQUFNLElBQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQTtRQUV0RCxJQUFJLE9BQU8sS0FBSyxJQUFJLElBQUksT0FBTyxLQUFLLFNBQVMsRUFBRTtZQUM3QyxPQUFPLFNBQVMsQ0FBQztTQUNsQjtRQUVELE9BQU8sT0FBTyxDQUFDLEtBQVUsQ0FBQztJQUM1QixDQUFDO0lBRUQsS0FBSyxDQUFDLEtBQUssQ0FBQyxHQUFXLEVBQUUsSUFBTztRQUM5QixNQUFNLElBQUksQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDO1lBQzlCLEdBQUc7U0FDSixFQUFFO1lBQ0QsSUFBSSxFQUFFO2dCQUNKLEdBQUc7Z0JBQ0gsS0FBSyxFQUFFLElBQUk7YUFDWjtTQUNGLEVBQUUsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQTtJQUN0QixDQUFDO0lBRUQsS0FBSyxDQUFDLE1BQU0sQ0FBQyxHQUFXO1FBQ3RCLE1BQU0sSUFBSSxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFBO0lBQzFDLENBQUM7Q0FDRjtBQS9CRCx3Q0ErQkMifQ==