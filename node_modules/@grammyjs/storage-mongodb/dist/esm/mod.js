export class MongoDBAdapter {
    constructor({ collection }) {
        this.collection = collection;
    }
    async read(key) {
        const session = await this.collection.findOne({ key });
        if (session === null || session === undefined) {
            return undefined;
        }
        return session.value;
    }
    async write(key, data) {
        await this.collection.updateOne({
            key
        }, {
            $set: {
                key,
                value: data
            }
        }, { upsert: true });
    }
    async delete(key) {
        await this.collection.deleteOne({ key });
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL21vZC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFRQSxNQUFNLE9BQU8sY0FBYztJQUd6QixZQUFZLEVBQUUsVUFBVSxFQUF3QztRQUM5RCxJQUFJLENBQUMsVUFBVSxHQUFHLFVBQVUsQ0FBQTtJQUM5QixDQUFDO0lBRUQsS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFXO1FBQ3BCLE1BQU0sT0FBTyxHQUFHLE1BQU0sSUFBSSxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFBO1FBRXRELElBQUksT0FBTyxLQUFLLElBQUksSUFBSSxPQUFPLEtBQUssU0FBUyxFQUFFO1lBQzdDLE9BQU8sU0FBUyxDQUFDO1NBQ2xCO1FBRUQsT0FBTyxPQUFPLENBQUMsS0FBVSxDQUFDO0lBQzVCLENBQUM7SUFFRCxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQVcsRUFBRSxJQUFPO1FBQzlCLE1BQU0sSUFBSSxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUM7WUFDOUIsR0FBRztTQUNKLEVBQUU7WUFDRCxJQUFJLEVBQUU7Z0JBQ0osR0FBRztnQkFDSCxLQUFLLEVBQUUsSUFBSTthQUNaO1NBQ0YsRUFBRSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFBO0lBQ3RCLENBQUM7SUFFRCxLQUFLLENBQUMsTUFBTSxDQUFDLEdBQVc7UUFDdEIsTUFBTSxJQUFJLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUE7SUFDMUMsQ0FBQztDQUNGIn0=